### 如何将 HTML 文档发送到浏览器
1. 第一步：当您在浏览器的地址栏中输入网址时，浏览器会向服务器发送 GET 请求进行检索。网页的第一个请求针对的是 HTML 资源，因此，确保 HTML 以最短延迟快速到达是关键性能目标TTFB。尝试优化TTFB（Time to First Btye ）能有效减少页面的响应时间。
   初始的 HTML 请求需要执行几个步骤（如何将 HTML 文档发送到浏览器）
    1. 尽量减少重定向：重定向会降低网页加载速度，因为它需要浏览器在新位置发出额外的 HTTP 请求来检索资源，同源重定向和跨源
    2. 缓存 HTML 响应：关键资源（例如 CSS、JavaScript、图片和其他资源类型）的链接的响应，减少从源服务器传送的请求数量，以及在浏览器中传送资源，从而重新验证资源而不是再次下载
    3. 测量服务器响应时间：服务器的响应时间在很大程度上取决于您的托管服务提供商和后端应用堆栈
    4. 压缩：基于文本的响应（例如 HTML、JavaScript、CSS 和 SVG 图片）应进行压缩，以减小通过网络传输时的大小，从而加快其下载速度。大多数网站托管服务商自动提供压缩功能，但是应该注意：（尽可能使用 Brotli、文件大小不要太大、动态压缩和静态压缩的使用范围不同）。自行进行压缩非常具有挑战性，通常最好让内容分发网络 (CDN)
    5. 内容分发网络 (CDN)：分布式服务器网络。服务器从源服务器缓存资源，反过来再从物理上更靠近用户的边缘服务器传送资源。在距离用户较近时，可以缩短往返时间 (RTT)。
 2. 第二步：使网页尽快在浏览器中进行初始渲染（下载 HTML 文档以呈现网页）
   
   ###### 关键路径：为了呈现网页，浏览器需要 HTML 文档本身以及呈现该文档所需的所有关键资源。
   ###### 关键渲染路径指：执行初始网页渲染所需的最少资源。CRP 是 critical rendering path 的缩写
   ###### 渐进式渲染：浏览器非常擅长渐进地呈现网页，因为浏览器不能依赖于具有呈现网页所需的所有资源的网站。

   * 构建对象模型（构造 DOM 树（文档对象模型）和 CSSOM 树（CSS对象模型））
     * DOM 树（HTML转化而来）
    字节 → 字符 → 标签 → 节点 → 对象模型。其中四个转化顺序依次为：
    1. 转换：浏览器从磁盘或网络中读取 HTML 的原始字节，并根据文件的指定编码（例如 UTF-8）将其转换为各个字符。
    2. 标签化：浏览器将字符串转换为不同的标签（按照 W3C HTML5 标准的规定，例如“<html>”“<body>”）以及用尖括号括起来的其他字符串。
    3. 词法分析：发出的词元被转换为“对象”，从而定义其属性和规则。
    4. DOM 构建：最后，由于 HTML 标记定义了不同标记之间的关系（某些标记包含在其他标记中），因此创建的对象会链接在一个树型数据结构中
   
* 渲染树构建、布局和绘制（CSSOM 树和 DOM 树组合成渲染树）
    构建渲染树，浏览器大致会执行以下操作：
    ```
    1. 从 DOM 树的根部开始，遍历每个可见节点。（不可见节点指：不会在在渲染时展现的节点）（一些给元素上通过css隐藏属性也不会在树中呈现）
    （visibility: hidden 与 display: none 不同）（前者结构还在，后者直接将元素移除）
    2. 对于每个可见节点，查找与之匹配的 CSSOM 规则，然后应用这些规则。
    3. 发出可见节点及其内容及其计算样式，组成一个新的渲染树
    ```
    * 布局
   ```
    1.为了弄清每个对象在网页上的确切大小和位置，浏览器从渲染树的根节点开始进行遍历。
    2.布局流程的输出是一个“盒模型”，它会精确捕获每个元素在视口中的确切位置和尺寸：所有相对测量值都将转换为屏幕上的绝对像素。
    3.渲染树中的每个节点转换为屏幕上的实际像素。此步骤通常称为“绘制”或“光栅化”
    ```
    * 绘制
    ```
    布局完成后，浏览器会发出“Paint Setup”和“Paint”事件，将渲染树转换成屏幕上的像素。
    ```
